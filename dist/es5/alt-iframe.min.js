/**
 * alt-iframe
 * - A simple native JavaScript (ES5) utility library to include partial HTML(s).
 * - You don't need a framework or jQuery!!!
 *
 * version: 1.2.0
 *
 * License: MIT
 *
 * USAGE:
 * see example at https://github.com/FrontEndNeo/alt-iframe
*/
(function(t){function e(t,e){return e="string"==typeof e&&f.querySelector(e)||e||f,Array.prototype.slice.call(e.querySelectorAll(t))}function r(t,e,r){t.setAttribute(r,t.getAttribute(e)),t.removeAttribute(e)}function i(t){var e=f.createElement("script");e.text=t.innerHTML;for(var r=t.attributes.length-1;r>=0;r--)e.setAttribute(t.attributes[r].name,t.attributes[r].value);return e}function a(t,a){e("x-script:not([processed])",t).forEach(function(t){t.setAttribute("processed",""),a&&t.setAttribute("await","");var e=i(t);if(e.hasAttribute("src")){var n=!e.hasAttribute("await");!a&&n?t.parentNode.replaceChild(e,t):(r(t,"src","x-src"),o(e))}else t.parentNode.replaceChild(e,t)})}function n(t,e){var r=t.getAttribute("x-js");if(r&&(e+='<script src="'+r+'"></script>',t.removeAttribute("x-js")),"SCRIPT"==t.tagName){if(e.trim()){var i=document.createElement("script");i.id=(new Date).getMilliseconds(),i.text=e,document.head.appendChild(i).parentNode.removeChild(i)}}else if(e=(e||"").replace(/<(\/)*script/gi,"<$1x-script"),t.tagName.indexOf("REPLACE")>=0||t.hasAttribute("replace")){var n=t.parentNode,s=t.hasAttribute("await");t.outerHTML=e,a(n,s),l(n)}else t.innerHTML=e,a(t,t.hasAttribute("await")),l(t)}function s(){if(4==this.readyState){var t=this.status,e=t>=200&&t<300||304==t?this.responseText:"Cannot GET "+this.responseURL;n(this.targetEl,e)}}function c(t){var e=(t||"").trim(),r=/\+$/.test(e)?"+":"";return r&&(e=e.substring(0,e.length-1)),b&&(e=/^[^a-z0-9_]/gi.test(e[0])?e.substring(1):b+"/"+e),p&&(e="/"==e[e.length-1]?e.substring(0,e.length-1):e+p),e+r}function o(t,e){if(e=c(e||t.getAttribute("src")),t.setAttribute("x-src",e),t.removeAttribute("src"),e){/\+$/.test(e)&&(//appendScript
t.setAttribute("x-js",e.replace(/\.[a-z]{3,4}\+$/,".js")),e=e.substring(0,e.length-1));var r=new XMLHttpRequest;r.targetEl=t,r.onreadystatechange=s,r.open("GET",e,!t.hasAttribute("await")),r.send()}}function u(){var t=this,e=f.querySelector(t.getAttribute("x-target"));e?(e[t.hasAttribute("replace")?"setAttribute":"removeAttribute"]("replace",""),t.hasAttribute("await")&&e.setAttribute("await",""),t.hasAttribute("async")&&e.removeAttribute("await",""),o(e,t.getAttribute("x-href").substring(1))):console.warn("Target element not found. Invalid target specified in element",t)}function l(t){t=t||document,e("[src]"+"audio embed iframe img input script source track video x-script [processed]".split(" ").map(function(t){return":not("+t+")"}).join(""),t).forEach(function(t){t.setAttribute("processed",""),o(t)}),e('[href^="#"][target^="#"]',t).forEach(function(t){r(t,"target","x-target"),r(t,"href","x-href"),t.setAttribute("href","javascript:;"),t.addEventListener("click",u)})}function d(){b=(f.body.getAttribute("components-loc")||"").replace(/\/+$/g,"").trim(),p=(f.body.getAttribute("components-ext")||"").trim(),l()}var b,p,f=document;"complete"==f.readyState||"loading"!=f.readyState&&!f.documentElement.doScroll?d():f.addEventListener("DOMContentLoaded",d)})();