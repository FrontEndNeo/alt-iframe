/**
 * alt-iframe
 * - A simple native JavaScript (ES5) utility library to include partial HTML(s).
 * - You don't need a framework or jQuery!!!
 *
 * version: 1.4.2
 *
 * License: MIT
 *
 * USAGE:
 * see example at https://github.com/FrontEndNeo/alt-iframe
*/
(function(t){function e(t,e){return e="string"==typeof e&&L.querySelector(e)||e||L,Array.prototype.slice.call(e.querySelectorAll(t))}function r(t,e,r){t.setAttribute(r,t.getAttribute(e)),t.removeAttribute(e)}function i(t){var e=L.createElement("script");e.text=t.innerHTML;for(var r=t.attributes.length-1;r>=0;r--)e.setAttribute(t.attributes[r].name,t.attributes[r].value);return e}function a(t,a){e("x-script:not([processed])",t).forEach(function(t){t.setAttribute("processed",""),a&&t.setAttribute("await","");var e=i(t);if(e.hasAttribute("src")){var n=!e.hasAttribute("await");!a&&n?t.parentNode.replaceChild(e,t):(r(t,"src","x-src"),l(e))}else t.parentNode.replaceChild(e,t)})}function n(){var t,e=(L.body.getAttribute("hash-error")||"").toLowerCase(),r=_.origin+_.pathname+_.search;"url"==e?(t="Page_route["+m.substring(1)+"]_not_found!_Redirected_to_this_page_root.",r=_.origin+_.pathname+"?_error="+t+_.search.replace(/^\?/,"&")):(t="Page route[#"+m.substring(1)+"] not found! Redirecting to this page root.",alert(t)),_.href=r}function s(t,r){if(T)if(t=t||m,t){var i=e('[url-hash="'+t+'"][x-target^="#"]');if(i.length)r&&i[0].setAttribute("skip-hash-update","1"),(!r||E&&r==m)&&(m=""),x=y,p.call(i[0]);else if(!v)if(m.indexOf(C)>0){var a=(S&&S.split(C)||[]).length,o=w[a];o||a<=w.length?(S+=(S?C:"")+o,E=e('[url-hash="'+S+'"][x-target^="#"]').length?0:250,setTimeout(function(){s(S,m)},E)):n()}else if(!f().length){var u=L.querySelector(m);u?(u.scrollIntoView(!0),m=""):n()}}else{var c=e("[skip-on-hash]");c.length&&(c.forEach(function(t){t.removeAttribute("skip-on-hash")}),g())}}function o(t,e){v--;var r=t.getAttribute("x-js");if(r&&(e+='<script src="'+r+'"></script>',t.removeAttribute("x-js")),"SCRIPT"==t.tagName){if(e.trim()){var i=L.createElement("script");i.id=(new Date).getMilliseconds(),i.text=e,L.head.appendChild(i).parentNode.removeChild(i)}}else if(e=(e||"").replace(/<(\/)*script/gi,"<$1x-script").replace(/<template /gi,'<script type="text/template" ').replace(/<\/template\s*>/gi,"</script>"),t.tagName.indexOf("REPLACE")>=0||t.hasAttribute("replace")){var n=t.parentNode,o=t.hasAttribute("await");t.outerHTML=e,a(n,o),g(n)}else t.innerHTML=e,a(t,t.hasAttribute("await")),g(t);s()}function u(){if(4==this.readyState){var t=this.status,e=t>=200&&t<300||304==t?this.responseText:"Cannot GET "+this.responseURL;o(this.targetEl,e)}}function c(t){var e=(t||"").trim(),r=/\+$/.test(e)?"+":"";return r&&(e=e.substring(0,e.length-1)),b&&(e=/^[^a-z0-9_]/gi.test(e[0])?e.substring(1):b+"/"+e),A&&(e="/"==e[e.length-1]?e.substring(0,e.length-1):e+A),e+r}function l(t,e){if(e=c(e||t.getAttribute("src")),t.setAttribute("x-src",e),t.removeAttribute("src"),e){v++,/\+$/.test(e)&&(//appendScript
t.setAttribute("x-js",e.replace(/\.[a-z]{3,4}\+$/,".js")),e=e.substring(0,e.length-1));var r=new XMLHttpRequest;r.targetEl=t,r.onreadystatechange=u,r.open("GET",e,!t.hasAttribute("await")),r.send()}}function h(t){if(T){if(!t.getAttribute("skip-hash-update")){var e=t.getAttribute("url-hash");if("#"!=e&&x!=e){x=e;try{history.pushState(null,e,e)}catch(t){}}}t.removeAttribute("skip-hash-update")}}function p(){var t=this;if("FORM"==t.tagName&&!t.checkValidity())return t.reportValidity(),!1;var e=t.getAttribute("if");if(e){var r=e.indexOf("("),i=(r>0?e.substring(0,r):e).replace(/\s/g,"");if(i){var a;try{a=window[i].call(t)}catch(t){console.error("Function NOT Found:",i)}if(!a)return!1}}var n=L.querySelector(t.getAttribute("x-target"));if(n){n[t.hasAttribute("replace")?"setAttribute":"removeAttribute"]("replace",""),t.hasAttribute("await")&&n.setAttribute("await",""),t.hasAttribute("async")&&n.removeAttribute("await",""),h(t);var s=t.getAttribute("x-href").substring(1);/^[! ]/.test(s)&&(s=s.substring(1).trim()),l(n,s)}else console.warn("Target element not found. Invalid target specified in element",t)}function f(t){return t=t||L,e("[src]"+"audio embed iframe img input script source track video x-script [processed] [skip-on-hash]".split(" ").map(function(t){return":not("+t+")"}).join(""),t)}function g(t){t=t||L,f(t).forEach(function(t){t.setAttribute("processed",""),l(t)}),e('[href^="#"][target^="#"]',t).forEach(function(t){r(t,"target","x-target"),r(t,"href","x-href"),t.setAttribute("href","javascript:;");var e=t.getAttribute("url-hash")||t.getAttribute("x-href");!/^#/.test(e)&&(e="#"+e),/^#[! ]+/.test(e)&&(e="#"),e=e.replace(/[+ ]/g,"").replace(new RegExp("\\"+C+"+$"),""),t.setAttribute("url-hash",e);var i="FORM"==t.tagName?"submit":"click",a=(t.getAttribute("on")||i).replace(/[^a-z]/gi,"_");a.split("_").forEach(function(e){e=e.trim().toLowerCase(),e.length>2&&(e=e.replace(/^on/,""),t.addEventListener(e,p))})})}function d(){v=0,m=_.hash||"",w=T&&m&&m.split(C)||[],b=(L.body.getAttribute("components-loc")||"").replace(/\/+$/g,"").trim(),A=(L.body.getAttribute("components-ext")||"").trim(),g(),setTimeout(function(){L.addEventListener("DOMSubtreeModified",function(){event&&event.target&&g(event.target)})})}var b,A,v,m,x,y,w,E,L=document,_=L.location,C="/",S="",T="off"!=(L.body.getAttribute("url-hash")||"").toLowerCase();T&&(window.onhashchange=function(){y=_.hash||"",y?y!=x&&(m=y,s()):(_.href.indexOf("#")<0&&_.reload(),x="#")}),"complete"==L.readyState||"loading"!=L.readyState&&!L.documentElement.doScroll?d():L.addEventListener("DOMContentLoaded",d)})();