/**
 * alt-iframe
 * - A simple native JavaScript (ES6+) utility library to include partial HTML(s).
 * - You don't need a framework or jQuery!!!
 *
 * version: 1.1.2
 *
 * License: MIT
 *
 * USAGE:
 * see example at https://github.com/FrontEndNeo/alt-iframe
*/
(function(t){function e(t,e){return e="string"==typeof e&&l.querySelector(e)||e||l,Array.prototype.slice.call(e.querySelectorAll(t))}function r(t,e,r){t.setAttribute(r,t.getAttribute(e)),t.removeAttribute(e)}function i(t){let e=l.createElement("script");e.text=t.innerHTML;for(let r=t.attributes.length-1;r>=0;r--)e.setAttribute(t.attributes[r].name,t.attributes[r].value);return e}function a(t,a){e("x-script:not([processed])",t).forEach(t=>{t.setAttribute("processed",""),a&&t.setAttribute("await","");let e=i(t);if(e.hasAttribute("src")){let i=!e.hasAttribute("await");!a&&i?t.parentNode.replaceChild(e,t):(r(t,"src","x-src"),c(e))}else t.parentNode.replaceChild(e,t)})}function n(t,e){if("SCRIPT"==t.tagName){if(e.trim()){let t=document.createElement("script");t.id=(new Date).getMilliseconds(),t.text=e,document.head.appendChild(t).parentNode.removeChild(t)}}else if(e=(e||"").replace(/<(\/)*script/gi,"<$1x-script"),t.tagName.indexOf("REPLACE")>=0||t.hasAttribute("replace")){let r=t.parentNode,i=t.hasAttribute("await");t.outerHTML=e,a(r,i),o(r)}else t.innerHTML=e,a(t,t.hasAttribute("await")),o(t)}function c(t,e){e=e||(t.getAttribute("src")||"").trim(),t.setAttribute("x-src",e),t.removeAttribute("src"),e&&(t.hasAttribute("await")?(async()=>{const r=await fetch(e).catch(t=>null);r&&r.ok&&n(t,await r.text())})():fetch(e).then(t=>t.text()).then(e=>n(t,e)).catch(t=>null))}function s(){let t=this,e=l.querySelector(t.getAttribute("x-target"));e?(e[t.hasAttribute("replace")?"setAttribute":"removeAttribute"]("replace",""),t.hasAttribute("await")&&e.setAttribute("await",""),t.hasAttribute("async")&&e.removeAttribute("await",""),c(e,t.getAttribute("x-href").substring(1))):console.warn("Target element not found. Invalid target specified in element",t)}function o(t){t=t||document,e("[src]"+"audio embed iframe img input script source track video x-script [processed]".split(" ").map(t=>":not("+t+")").join(""),t).forEach(t=>{t.setAttribute("processed",""),c(t)}),e('[href^="#"][target^="#"]',t).forEach(t=>{r(t,"target","x-target"),r(t,"href","x-href"),t.setAttribute("href","javascript:;"),t.addEventListener("click",s)})}function u(){o()}let l=document;"complete"==l.readyState||"loading"!=l.readyState&&!l.documentElement.doScroll?u():l.addEventListener("DOMContentLoaded",u)})();